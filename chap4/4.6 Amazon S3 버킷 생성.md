### Amazon S3 ë²„í‚· ìƒì„±

### ğŸ“ ì—°ìŠµ: S3 ë²„í‚· ìƒì„± í›„ EC2 ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì—°ê²°í•˜ê¸°(ê´€ë¦¬ì ê³„ì •ìœ¼ë¡œ ì§„í–‰)


#### 1. S3 ë²„í‚· ìƒì„±

1. **ì½˜ì†” ë¡œê·¸ì¸** â†’ ê²€ìƒ‰ì°½ì— S3 ì…ë ¥ í›„ ì´ë™

2. **Create bucket** í´ë¦­

3. ë²„í‚· ì´ë¦„: employee-photo-bucket-sr-963 (ë³¸ì¸ ì´ë‹ˆì…œ + ìˆ«ì)

  ì´ë¦„ì€ ì „ **ì„¸ê³„ì—ì„œ ìœ ì¼**í•´ì•¼ í•˜ê³ , ê³µë°±Â·íŠ¹ìˆ˜ë¬¸ì âŒ

4. ë¦¬ì „: ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ê°€ê¹Œìš´ ë¦¬ì „ ì„ íƒ (ì˜ˆ: us-west-2)

5. ë‚˜ë¨¸ì§€ëŠ” ê¸°ë³¸ê°’ ê·¸ëŒ€ë¡œ â†’ **Create bucket**

---

#### 2. ê°ì²´ ì—…ë¡œë“œ í…ŒìŠ¤íŠ¸

1. ìƒì„±í•œ ë²„í‚· í´ë¦­ â†’ **Upload** â†’ **Add files**

2. ì˜ˆì‹œ íŒŒì¼: employee2.jpg ì„ íƒ í›„ **Upload**

3. ì—…ë¡œë“œ ì™„ë£Œ í›„ ê°ì²´ê°€ ëª©ë¡ì— ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸

---

#### 3. ë²„í‚· ì •ì±… ìˆ˜ì • (IAM ì—­í•  í—ˆìš©)

1. ë²„í‚· â†’ **Permissions íƒ­** â†’ **Bucket policy** â†’ **Edit**

2. ì•„ë˜ ì •ì±… ë¶™ì—¬ë„£ê¸° í›„ <INSERT-ACCOUNT-NUMBER>ì™€ <INSERT-BUCKET-NAME> ìˆ˜ì •
```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowS3ReadAccess",
      "Effect": "Allow",
      "Principal": {
        "AWS": "arn:aws:iam::<ê³„ì •ë²ˆí˜¸>:role/S3DynamoDBFullAccessRole"
      },
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::employee-photo-bucket-sr-963",
        "arn:aws:s3:::employee-photo-bucket-sr-963/*"
      ]
    }
  ]
}
```

âš ï¸ ì£¼ì˜: S3DynamoDBFullAccessRole ì´ IAMì—ì„œ **ë¯¸ë¦¬ ìƒì„±ë˜ì–´ ìˆì–´ì•¼ í•¨**.

---

#### 4. EC2 ì¸ìŠ¤í„´ìŠ¤ ì¬ì‹œì‘ (S3 ì—°ê²°)

1. **EC2 ì½˜ì†” â†’ Instances**

2. ê¸°ì¡´ì— ì¤‘ì§€ëœ ì¸ìŠ¤í„´ìŠ¤ ì„ íƒ â†’ **Actions â†’ Image and templates â†’ Launch more like this**

3. ì¸ìŠ¤í„´ìŠ¤ ì´ë¦„: employee-directory-app-s3

4. ë„¤íŠ¸ì›Œí¬ ì„¤ì •:

  - VPC: ê¸°ì¡´ê³¼ ë™ì¼

  - Subnet: Public Subnet

  - Auto-assign public IP: **Enable**

5. Advanced details â†’ **IAM ì—­í•  í™•ì¸** (EmployeeWebApp S3 ê¶Œí•œ ìˆëŠ” ì—­í• ) 

6. **User data** ì˜ì—­ì— ë²„í‚· ì´ë¦„ ì„¤ì • (ì•±ì´ S3 ë²„í‚· ì‚¬ìš©í•˜ë„ë¡)
    
    EC2 ì„œë²„ ìƒì„±ì‹œ ì‚¬ìš©í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸ 
    ```
    #!/bin/bash -ex
    wget https://aws-tc-largeobjects.s3-us-west-2.amazonaws.com/DEV-AWS-MO-GCNv2/FlaskApp.zip
    unzip FlaskApp.zip
    cd FlaskApp/
    yum -y install python3-pip
    pip install -r requirements.txt
    yum -y install stress
    export PHOTOS_BUCKET=employee-photo-bucket-sr-888
    export AWS_DEFAULT_REGION=ap-northeast-2
    export DYNAMO_MODE=on
    FLASK_APP=application.py /usr/local/bin/flask run --host=0.0.0.0 --port=80
    ```

7. **Launch instance** í´ë¦­

---

#### 5. ì‹¤í–‰ í™•ì¸

1. ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœê°€ running & **2/2 checks passed** ë  ë•Œê¹Œì§€ ëŒ€ê¸°

2. í¼ë¸”ë¦­ IP ì£¼ì†Œ ë³µì‚¬ â†’ ë¸Œë¼ìš°ì €ì— ë¶™ì—¬ë„£ì–´ ì•± í™•ì¸

  - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì€ ì•„ì§ì´ì§€ë§Œ, ì•±ì´ ì‹¤í–‰ë˜ëŠ”ì§€ë§Œ í™•ì¸

---
#### 6. ì •ë¦¬

- í…ŒìŠ¤íŠ¸ ëë‚˜ë©´:

  - ì¸ìŠ¤í„´ìŠ¤ **ì¤‘ì§€**

  - S3 ë²„í‚· ì•ˆì˜ **ê°ì²´ ì‚­ì œ**

### AWS Skill Bulder Lab ì°¸ì¡°
[Introduction to Amazon Simple Storage Service (S3) (í•œêµ­ì–´)](https://skillbuilder.aws/learn/R54NZHEX5K/introduction-to-amazon-simple-storage-service-s3-/1UKWXUSA33)
[S3 for Application Storage (í•œêµ­ì–´)](https://skillbuilder.aws/learn/U8S8ACMX1B/s3-for-application-storage-/DVM497S8TP)
[Lab - Create a Static Website with Amazon Simple Storage Service (Amazon S3) (í•œêµ­ì–´)](https://skillbuilder.aws/learn/2NMXKK69FU/lab--create-a-static-website-with-amazon-simple-storage-service-amazon-s3-/NC2Y18G9MJ)

