## Amazon CloudWatch

### 🌩️ Amazon CloudWatch 실습 정리
#### 1. 목표

- EC2 인스턴스의 **CPU 사용률을 시간에 따라 대시보드로 시각화**

- CPU 사용률이 **5분 동안 70% 초과** 시, **이메일 알림** 받기

---

#### 2. CloudWatch 대시보드 만들기

1. AWS 콘솔에서 **CloudWatch → Dashboards → Create dashboard**

2. 이름: mydashboard

3. 위젯 추가: **Line (선 그래프)**

4. 지표 선택: **Metrics → EC2 → Per-Instance Metrics → CPUUtilization**

5. 저장 → 이제 인스턴스 CPU 사용률 그래프 확인 가능

💡 Tip: 기본 지표는 인프라 상태만 보여줌 (예: CPU, 네트워크)
→ 애플리케이션 상태를 더 정확히 보려면 **사용자 지정 지표(Custom Metrics)** 추가 필요

---

#### 3. CloudWatch 알람 만들기

1. **Alarms → Create alarm**

2. 지표 선택: EC2 → Per-Instance Metrics → CPUUtilization

3. 조건 설정:

    - 기간: 5분

    - 임계값: 70% (5분 동안 CPU 사용률 > 70%면 알람 발생)

4. 알림 구성:

    - **Amazon SNS 사용** → CPU_Utilization_Topic 생성

    - 이메일 주소 입력 (알림 받을 사람)

    - 이메일로 구독 확인 필요 (Confirm subscription)

5. 알람 상태

    - OK → 정상

    - In alarm → 조건 충족 (알림 발생)

    - Insufficient data → 데이터 부족

---

#### 4. 활용 시나리오

- 📧 CPU 사용률 급증 시 → **시스템 관리자/개발자에게 자동 이메일 발송**

- 🚀 추후 확장: 알람이 발생하면 **EC2 Auto Scaling**을 자동으로 실행하여 인스턴스를 추가할 수도 있음

---

#### ✅ 정리하면:
CloudWatch를 사용하면 **EC2 성능을 실시간으로 모니터링**하고,
임계치 초과 시 **자동 알림 & 대응**이 가능해집니다.

---



### AWS Skill Bulder Lab 참조
[Collecting and Analyzing Logs with Amazon CloudWatch Logs Insights (한국어)](https://skillbuilder.aws/learn/UKDQEXHW73/collecting-and-analyzing-logs-with-amazon-cloudwatch-logs-insights-/A4UEN4T6H4)
